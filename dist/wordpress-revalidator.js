"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("node:path"),a=["post_update"],l=(o,e)=>{const t=o.headers,n=[];if(console.log(`[ON-DEMAND_ISR]: Received a request ${t["x-wp-webhook-name"]}`),process.env?.TELEPORTHQ_ISR_TOKEN!==o.query?.TELEPORTHQ_ISR_TOKEN)return n;if(a.includes(t["x-wp-webhook-name"])===!1)return console.log(`[ON-DEMAND_ISR]: Received an event that is not allowed: ${t["x-wp-webhook-name"]}`),n;const r=o.body,i=Object.values(e).filter(s=>{if(s.contentType===r.post.post_type)return s}).map(s=>u(r.post,s));return n.push(...i),n},u=(o,e)=>{if(!("dynamicRouteAttribute"in e))return e.route?.startsWith("/")?e.route:`/${e.route}`;if(e.dynamicRouteAttribute==="id"){const t=c.join(e.route,String(o.ID));return t.startsWith("/")?t:`/${t}`}};exports.revalidate=l;
