"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("node:path"),y=require("node:process"),u=["DeletedEntry","Entry"],d=async(n,e)=>{const t=[];if(y.env?.TELEPORTHQ_ISR_TOKEN!==n.query?.TELEPORTHQ_ISR_TOKEN)return t;const s=n.body;if(!u.includes(s.sys?.type))return console.log(`[ON-DEMAND_ISR]: Received an event that is not allowed: ${s.sys?.type}`),t;const o=s.sys?.contentType?.sys?.id,c=Object.values(e).filter(i=>{if(i.contentType===o)return i}).map(i=>l(s,i));return t.push(...c),t},l=(n,e)=>{if(!("dynamicRouteAttribute"in e))return e.route;if(e?.dynamicRouteAttribute==="id")return r.join(e.route,n.sys.id);const t=n.fields?.[e.dynamicRouteAttribute];return t["en-US"]?r.join(e.route,t["en-US"]):r.join(e.route,Object.keys(t)[0])};exports.revalidate=d;
