"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("node:path"),a=require("node:process"),T=["DeletedEntry","Entry"],f=async(n,e)=>{const s=n.query,o=n.body,l=o.sys?.type;if(!T.includes(l)||a.env?.TELEPORTHQ_ISR_TOKEN!==s?.TELEPORTHQ_ISR_TOKEN)return;const c=o.sys?.contentType?.sys?.id,i=[],y=Object.values(e).filter(t=>t.contentType===c&&t.type==="details")?.[0];if(y){const t=u(o,y);i.push(t)}return Object.values(e).filter(t=>t.contentType===c&&t.type==="list").forEach(t=>{const d=u(o,t);i.push(d)}),i},u=(n,e)=>{if(e?.dynamicRouteAttribute==="id")return r.join(e.route,n.sys.id);const s=n.fields?.[e.dynamicRouteAttribute];return s["en-US"]?r.join(e.route,s["en-US"]):r.join(e.route,Object.keys(s)[0])};exports.revalidate=f;
