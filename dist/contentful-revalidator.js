"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("next/cache"),d=require("node:path"),T=require("node:process"),E=["DeletedEntry","Entry"],h=async(n,e)=>{const a=n.query,s=n.body,l=s.sys?.type;if(!E.includes(l)||T.env?.TELEPORTHQ_ISR_TOKEN!==a?.TELEPORTHQ_ISR_TOKEN)return;const c=s.sys?.contentType?.sys?.id,i=Object.values(e).filter(t=>t.contentType===c&&t.type==="details")?.[0],o=[];if(i){const t=r(s,i);o.push(t)}Object.values(e).filter(t=>t.contentType===c&&t.type==="list").forEach(t=>{const y=r(s,t);o.push(y)}),o.forEach(t=>{console.log(`[ON-DEMAND_ISR]: Clearing cahce for path - ${t} `),u.revalidatePath(t)})},r=(n,e)=>e?.dynamicRouteAttribute?d.join(e.route,e.dynamicRouteAttribute==="id"?n.sys.id:n.fields.slug["en-US"]):e.route;exports.revalidate=h;
