"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("node:process"),l=require("node:path"),u=require("./utils-91be1e9c.js"),a=/api::([^.\s]+)/,y=["etnry.create","entry.publish","entry.unpublish","entry.update","entry.delete"],d=async(t,e)=>{const n=[];if(console.log("[ON-DEMAND_ISR]: Received a request"),i.env?.TELEPORTHQ_ISR_TOKEN!==t.query?.TELEPORTHQ_ISR_TOKEN)return n;const o=t.body;if(y.includes(o.event)===!1)return console.log(`[ON-DEMAND_ISR]: Received an event that is not allowed: ${o.event}`),n;const c=Object.values(e).filter(r=>{const s=v(r.contentType);if(s&&r.contentType===s)return r}).map(r=>p(o.entry,r));return n.push(...c),n.filter(Boolean)},p=(t,e)=>{if(!("dynamicRouteAttribute"in e))return e.route?.startsWith("/")?e.route:`/${e.route}`;const n=l.join(e.route,e.dynamicRouteAttribute);return u.resolveDynamicAttributeToPath(n,t)},v=t=>{const e=t.match(a);return e?e[1]:null};exports.revalidate=d;
